/*!
 * Cropper.js v1.0.0-rc.3
 * https://github.com/fengyuanchen/cropperjs
 *
 * Copyright (c) 2017 Fengyuan Chen
 * Released under the MIT license
 *
 * Date: 2017-07-07T12:56:42.462Z
 */
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Cropper=b()}(this,function(){function az(a){return bK.call(a).slice(8,-1).toLowerCase()}function aQ(a){return"number"==typeof a&&!isNaN(a)}function aV(a){return"undefined"==typeof a}function aM(a){return"object"===("undefined"==typeof a?"undefined":bG(a))&&null!==a}function aG(c){if(!aM(c)){return !1}try{var d=c.constructor,b=d.prototype;return d&&b&&aX.call(b,"isPrototypeOf")}catch(c){return !1}}function aH(a){return"function"===az(a)}function aB(a){return Array.isArray?Array.isArray(a):"array"===az(a)}function aN(a){return"string"==typeof a&&(a=a.trim?a.trim():a.replace(bP,"$1")),a}function aS(c,b){if(c&&aH(b)){var e=void 0;if(aB(c)||aQ(c.length)){var d=c.length;for(e=0;e<d&&b.call(c,c[e],e,c)!==!1;e++){}}else{aM(c)&&Object.keys(c).forEach(function(a){b.call(c,c[a],a,c)})}}return c}function aA(c){for(var d=arguments.length,b=Array(d>1?d-1:0),f=1;f<d;f++){b[f-1]=arguments[f]}if(aM(c)&&b.length>0){if(Object.assign){return Object.assign.apply(Object,[c].concat(b))}b.forEach(function(a){aM(a)&&Object.keys(a).forEach(function(e){c[e]=a[e]})})}return c}function aR(d,f){for(var b=arguments.length,c=Array(b>2?b-2:0),g=2;g<b;g++){c[g-2]=arguments[g]}return function(){for(var e=arguments.length,h=Array(e),i=0;i<e;i++){h[i]=arguments[i]}return d.apply(f,c.concat(h))}}function aJ(d,b){var c=d.style;aS(b,function(f,e){a9.test(e)&&aQ(f)&&(f+="px"),c[e]=f})}function aF(a,b){return a.classList?a.classList.contains(b):a.className.indexOf(b)>-1}function ay(d,b){if(b){if(aQ(d.length)){return void aS(d,function(a){ay(a,b)})}if(d.classList){return void d.classList.add(b)}var c=aN(d.className);c?c.indexOf(b)<0&&(d.className=c+" "+b):d.className=b}}function aI(c,b){if(b){return aQ(c.length)?void aS(c,function(a){aI(a,b)}):c.classList?void c.classList.remove(b):void (c.className.indexOf(b)>=0&&(c.className=c.className.replace(b,"")))}}function aO(d,b,c){if(b){return aQ(d.length)?void aS(d,function(a){aO(a,b,c)}):void (c?ay(d,b):aI(d,b))}}function aP(a){return a.replace(bp,"$1-$2").toLowerCase()}function ax(a,b){return aM(a[b])?a[b]:a.dataset?a.dataset[b]:a.getAttribute("data-"+aP(b))}function av(c,d,b){aM(b)?c[d]=b:c.dataset?c.dataset[d]=b:c.setAttribute("data-"+aP(d),b)}function aU(c,d){if(aM(c[d])){delete c[d]}else{if(c.dataset){try{delete c.dataset[d]}catch(b){c.dataset[d]=null}}else{c.removeAttribute("data-"+aP(d))}}}function au(d,f,b){var c=aN(f).split(aW);return c.length>1?void aS(c,function(a){au(d,a,b)}):void (d.removeEventListener?d.removeEventListener(f,b,!1):d.detachEvent&&d.detachEvent("on"+f,b))}function ar(d,f,b,c){var g=aN(f).split(aW),h=b;return g.length>1?void aS(g,function(a){ar(d,a,b)}):(c&&(b=function(){for(var a=arguments.length,j=Array(a),e=0;e<a;e++){j[e]=arguments[e]}return au(d,f,b),h.apply(d,j)}),void (d.addEventListener?d.addEventListener(f,b,!1):d.attachEvent&&d.attachEvent("on"+f,b)))}function bj(b,c,a){if(b.dispatchEvent){var d=void 0;return aH(Event)&&aH(CustomEvent)?d=aV(a)?new Event(c,{bubbles:!0,cancelable:!0}):new CustomEvent(c,{detail:a,bubbles:!0,cancelable:!0}):aV(a)?(d=document.createEvent("Event"),d.initEvent(c,!0,!0)):(d=document.createEvent("CustomEvent"),d.initCustomEvent(c,!0,!0,a)),b.dispatchEvent(d)}return !b.fireEvent||b.fireEvent("on"+c)}function bu(d){var b=d||window.event;if(b.target||(b.target=b.srcElement||document),!aQ(b.pageX)&&aQ(b.clientX)){var c=d.target.ownerDocument||document,e=c.documentElement,f=c.body;b.pageX=b.clientX+((e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0)),b.pageY=b.clientY+((e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0))}return b}function bs(c){var d=document.documentElement,b=c.getBoundingClientRect();return{left:b.left+((window.scrollX||d&&d.scrollLeft||0)-(d&&d.clientLeft||0)),top:b.top+((window.scrollY||d&&d.scrollTop||0)-(d&&d.clientTop||0))}}function bw(a,b){return a.getElementsByTagName(b)}function aK(a,b){return a.getElementsByClassName?a.getElementsByClassName(b):a.querySelectorAll("."+b)}function a8(a){return document.createElement(a)}function bk(a,b){a.appendChild(b)}function a4(a){a.parentNode&&a.parentNode.removeChild(a)}function br(a){for(;a.firstChild;){a.removeChild(a.firstChild)}}function a2(a){var b=a.match(bm);return b&&(b[1]!==location.protocol||b[2]!==location.hostname||b[3]!==location.port)}function a0(a){var b="timestamp="+(new Date).getTime();return a+(a.indexOf("?")===-1?"?":"&")+b}function bo(c,d){if(c.naturalWidth&&!aw){return void d(c.naturalWidth,c.naturalHeight)}var b=a8("img");b.onload=function(){d(this.width,this.height)},b.src=c.src}function bh(e){var b=[],d=e.translateX,j=e.translateY,l=e.rotate,g=e.scaleX,f=e.scaleY;aQ(d)&&0!==d&&b.push("translateX("+d+"px)"),aQ(j)&&0!==j&&b.push("translateY("+j+"px)"),aQ(l)&&0!==l&&b.push("rotate("+l+"deg)"),aQ(g)&&1!==g&&b.push("scaleX("+g+")"),aQ(f)&&1!==f&&b.push("scaleY("+f+")");var k=b.length?b.join(" "):"none";return{WebkitTransform:k,msTransform:k,transform:k}}function bf(u,l){var q=Math.abs(u.degree)%180,j=(q>90?180-q:q)*Math.PI/180,f=Math.sin(j),g=Math.cos(j),b=u.width,k=u.height,p=u.aspectRatio,v=void 0,m=void 0;return l?(v=b/(g+f/p),m=v/p):(v=b*g+k*f,m=b*f+k*g),{width:v,height:m}}function ba(y,N,G){var C=a8("canvas"),D=C.getContext("2d"),A=0,H=0,L=N.naturalWidth,z=N.naturalHeight,K=N.rotate,F=N.scaleX,B=N.scaleY,q=aQ(F)&&aQ(B)&&(1!==F||1!==B),E=aQ(K)&&0!==K,I=E||q,J=L*Math.abs(F||1),k=z*Math.abs(B||1),j=void 0,M=void 0,e=void 0;return q&&(j=J/2,M=k/2),E&&(e=bf({width:J,height:k,degree:K}),J=e.width,k=e.height,j=J/2,M=k/2),C.width=J,C.height=k,G.fillColor&&(D.fillStyle=G.fillColor,D.fillRect(0,0,J,k)),I&&(A=-L/2,H=-z/2,D.save(),D.translate(j,M)),E&&D.rotate(K*Math.PI/180),q&&D.scale(F,B),D.imageSmoothingEnabled=!!G.imageSmoothingEnabled,G.imageSmoothingQuality&&(D.imageSmoothingQuality=G.imageSmoothingQuality),D.drawImage(y,Math.floor(A),Math.floor(H),Math.floor(L),Math.floor(z)),I&&D.restore(),C}function aq(d,f,b){var c="",g=f;for(b+=f;g<b;g++){c+=an(d.getUint8(g))}return c}function bc(y){var u=new DataView(y),x=u.byteLength,m=void 0,g=void 0,j=void 0,b=void 0,q=void 0,w=void 0,z=void 0,v=void 0,k=void 0,f=void 0;if(255===u.getUint8(0)&&216===u.getUint8(1)){for(k=2;k<x;){if(255===u.getUint8(k)&&225===u.getUint8(k+1)){z=k;break}k++}}if(z&&(g=z+4,j=z+10,"Exif"===aq(u,g,4)&&(w=u.getUint16(j),q=18761===w,(q||19789===w)&&42===u.getUint16(j+2,q)&&(b=u.getUint32(j+4,q),b>=8&&(v=j+b)))),v){for(x=u.getUint16(v,q),f=0;f<x;f++){if(k=v+12*f+2,274===u.getUint16(k,q)){k+=8,m=u.getUint16(k,q),aw&&u.setUint16(k,1,q);break}}}return m}function bx(d){var g=d.replace(bq,""),b=atob(g),c=b.length,h=new ArrayBuffer(c),j=new Uint8Array(h),f=void 0;for(f=0;f<c;f++){j[f]=b.charCodeAt(f)}return h}function bn(d){var f=new Uint8Array(d),b=f.length,c="",g=void 0;for(g=0;g<b;g++){c+=an(f[g])}return"data:image/jpeg;base64,"+btoa(c)}function a7(d,f){var b=d.pageX,c=d.pageY,g={endX:b,endY:c};return f?g:aA({startX:b,startY:c},g)}function aL(c){var d=aA({},c),b=[];return aS(c,function(e,a){delete d[a],aS(d,function(l){var f=Math.abs(e.startX-l.startX),m=Math.abs(e.startY-l.startY),q=Math.abs(e.endX-l.endX),k=Math.abs(e.endY-l.endY),j=Math.sqrt(f*f+m*m),p=Math.sqrt(q*q+k*k),g=(p-j)/j;b.push(g)})}),b.sort(function(a,f){return Math.abs(a)<Math.abs(f)}),b[0]}function be(d){var f=0,b=0,c=0;return aS(d,function(a){var e=a.startX,g=a.startY;f+=e,b+=g,c+=1}),f/=c,b/=c,{pageX:f,pageY:b}}var aE={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:0.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:0.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},bd='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',bG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},aZ=function(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}},bl=function(){function a(d,f){for(var b=0;b<f.length;b++){var c=f[b];c.enumerable=c.enumerable||!1,c.configurable=!0,"value" in c&&(c.writable=!0),Object.defineProperty(d,c.key,c)}}return function(d,b,c){return b&&a(d.prototype,b),c&&a(d,c),d}}(),a6=function(c){if(Array.isArray(c)){for(var d=0,b=Array(c.length);d<c.length;d++){b[d]=c[d]}return b}return Array.from(c)},bq=/^data:.*,/,bp=/([a-z\d])([A-Z])/g,bm=/^(https?:)\/\/([^:\/?#]+):?(\d*)/i,aW=/\s+/,a9=/^(width|height|left|top|marginLeft|marginTop)$/,bP=/^\s+(.*)\s+$/,bv=/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i,ao="undefined"!=typeof window?window.navigator:null,aw=ao&&bv.test(ao.userAgent),a1=Object.prototype,bK=a1.toString,aX=a1.hasOwnProperty,an=(Array.prototype.slice,String.fromCharCode),bC={render:function(){var a=this;a.initContainer(),a.initCanvas(),a.initCropBox(),a.renderCanvas(),a.cropped&&a.renderCropBox()},initContainer:function(){var d=this,g=d.options,b=d.element,c=d.container,h=d.cropper,j="cropper-hidden",f=void 0;ay(h,j),aI(b,j),d.containerData=f={width:Math.max(c.offsetWidth,Number(g.minContainerWidth)||200),height:Math.max(c.offsetHeight,Number(g.minContainerHeight)||100)},aJ(h,{width:f.width,height:f.height}),ay(b,j),aI(h,j)},initCanvas:function(){var v=this,p=v.options.viewMode,u=v.containerData,k=v.imageData,f=Math.abs(k.rotate)%180===90,g=f?k.naturalHeight:k.naturalWidth,b=f?k.naturalWidth:k.naturalHeight,m=g/b,s=u.width,q=u.height;u.height*m>u.width?3===p?s=u.height*m:q=u.width/m:3===p?q=u.width/m:s=u.height*m;var j={naturalWidth:g,naturalHeight:b,aspectRatio:m,width:s,height:q};j.oldLeft=j.left=(u.width-s)/2,j.oldTop=j.top=(u.height-q)/2,v.canvasData=j,v.limited=1===p||2===p,v.limitCanvas(!0,!0),v.initialImageData=aA({},k),v.initialCanvasData=aA({},j)},limitCanvas:function(A,v){var y=this,m=y.options,g=m.viewMode,j=y.containerData,b=y.canvasData,q=b.aspectRatio,x=y.cropBoxData,B=y.cropped&&x;if(A){var w=Number(m.minCanvasWidth)||0,k=Number(m.minCanvasHeight)||0;g>1?(w=Math.max(w,j.width),k=Math.max(k,j.height),3===g&&(k*q>w?w=k*q:k=w/q)):g>0&&(w?w=Math.max(w,B?x.width:0):k?k=Math.max(k,B?x.height:0):B&&(w=x.width,k=x.height,k*q>w?w=k*q:k=w/q)),w&&k?k*q>w?k=w/q:w=k*q:w?k=w/q:k&&(w=k*q),b.minWidth=w,b.minHeight=k,b.maxWidth=1/0,b.maxHeight=1/0}if(v){if(g){var f=j.width-b.width,z=j.height-b.height;b.minLeft=Math.min(0,f),b.minTop=Math.min(0,z),b.maxLeft=Math.max(0,f),b.maxTop=Math.max(0,z),B&&y.limited&&(b.minLeft=Math.min(x.left,x.left+(x.width-b.width)),b.minTop=Math.min(x.top,x.top+(x.height-b.height)),b.maxLeft=x.left,b.maxTop=x.top,2===g&&(b.width>=j.width&&(b.minLeft=Math.min(0,f),b.maxLeft=Math.max(0,f)),b.height>=j.height&&(b.minTop=Math.min(0,z),b.maxTop=Math.max(0,z))))}else{b.minLeft=-b.width,b.minTop=-b.height,b.maxLeft=j.width,b.maxTop=j.height}}},renderCanvas:function(p){var k=this,m=k.canvasData,g=k.imageData,d=g.rotate;if(k.rotated){k.rotated=!1;var f=bf({width:g.width,height:g.height,degree:d}),b=f.width/f.height,j=1===g.aspectRatio;if(j||b!==m.aspectRatio){if(m.left-=(f.width-m.width)/2,m.top-=(f.height-m.height)/2,m.width=f.width,m.height=f.height,m.aspectRatio=b,m.naturalWidth=g.naturalWidth,m.naturalHeight=g.naturalHeight,j&&d%90||d%180){var l=bf({width:g.naturalWidth,height:g.naturalHeight,degree:d});m.naturalWidth=l.width,m.naturalHeight=l.height}k.limitCanvas(!0,!1)}}(m.width>m.maxWidth||m.width<m.minWidth)&&(m.left=m.oldLeft),(m.height>m.maxHeight||m.height<m.minHeight)&&(m.top=m.oldTop),m.width=Math.min(Math.max(m.width,m.minWidth),m.maxWidth),m.height=Math.min(Math.max(m.height,m.minHeight),m.maxHeight),k.limitCanvas(!1,!0),m.oldLeft=m.left=Math.min(Math.max(m.left,m.minLeft),m.maxLeft),m.oldTop=m.top=Math.min(Math.max(m.top,m.minTop),m.maxTop),aJ(k.canvas,aA({width:m.width,height:m.height},bh({translateX:m.left,translateY:m.top}))),k.renderImage(),k.cropped&&k.limited&&k.limitCropBox(!0,!0),p&&k.output()},renderImage:function(d){var j=this,b=j.canvasData,c=j.imageData,k=void 0,l=void 0,g=void 0,f=void 0;c.rotate&&(l=bf({width:b.width,height:b.height,degree:c.rotate,aspectRatio:c.aspectRatio},!0),g=l.width,f=l.height,k={width:g,height:f,left:(b.width-g)/2,top:(b.height-f)/2}),aA(c,k||{width:b.width,height:b.height,left:0,top:0}),aJ(j.image,aA({width:c.width,height:c.height},bh(aA({translateX:c.left,translateY:c.top},c)))),d&&j.output()},initCropBox:function(){var d=this,f=d.options,b=f.aspectRatio,c=Number(f.autoCropArea)||0.8,g=d.canvasData,h={width:g.width,height:g.height};b&&(g.height*b>g.width?h.height=h.width/b:h.width=h.height*b),d.cropBoxData=h,d.limitCropBox(!0,!0),h.width=Math.min(Math.max(h.width,h.minWidth),h.maxWidth),h.height=Math.min(Math.max(h.height,h.minHeight),h.maxHeight),h.width=Math.max(h.minWidth,h.width*c),h.height=Math.max(h.minHeight,h.height*c),h.oldLeft=h.left=g.left+(g.width-h.width)/2,h.oldTop=h.top=g.top+(g.height-h.height)/2,d.initialCropBoxData=aA({},h)},limitCropBox:function(y,u){var x=this,m=x.options,g=m.aspectRatio,j=x.containerData,b=x.canvasData,q=x.cropBoxData,w=x.limited;if(y){var z=Number(m.minCropBoxWidth)||0,v=Number(m.minCropBoxHeight)||0,k=Math.min(j.width,w?b.width:j.width),f=Math.min(j.height,w?b.height:j.height);z=Math.min(z,j.width),v=Math.min(v,j.height),g&&(z&&v?v*g>z?v=z/g:z=v*g:z?v=z/g:v&&(z=v*g),f*g>k?f=k/g:k=f*g),q.minWidth=Math.min(z,k),q.minHeight=Math.min(v,f),q.maxWidth=k,q.maxHeight=f}u&&(w?(q.minLeft=Math.max(0,b.left),q.minTop=Math.max(0,b.top),q.maxLeft=Math.min(j.width,b.left+b.width)-q.width,q.maxTop=Math.min(j.height,b.top+b.height)-q.height):(q.minLeft=0,q.minTop=0,q.maxLeft=j.width-q.width,q.maxTop=j.height-q.height))},renderCropBox:function(){var d=this,f=d.options,b=d.containerData,c=d.cropBoxData;(c.width>c.maxWidth||c.width<c.minWidth)&&(c.left=c.oldLeft),(c.height>c.maxHeight||c.height<c.minHeight)&&(c.top=c.oldTop),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),d.limitCropBox(!1,!0),c.oldLeft=c.left=Math.min(Math.max(c.left,c.minLeft),c.maxLeft),c.oldTop=c.top=Math.min(Math.max(c.top,c.minTop),c.maxTop),f.movable&&f.cropBoxMovable&&av(d.face,"action",c.width===b.width&&c.height===b.height?"move":"all"),aJ(d.cropBox,aA({width:c.width,height:c.height},bh({translateX:c.left,translateY:c.top}))),d.cropped&&d.limited&&d.limitCanvas(!0,!0),d.disabled||d.output()},output:function(){var a=this;a.preview(),a.complete&&bj(a.element,"crop",a.getData())}},ag="preview",bJ={initPreview:function(){var d=this,f=d.options.preview,b=a8("img"),c=d.crossOrigin,g=c?d.crossOriginUrl:d.url;if(c&&(b.crossOrigin=c),b.src=g,bk(d.viewBox,b),d.image2=b,f){var h=f.querySelector?[f]:document.querySelectorAll(f);d.previews=h,aS(h,function(a){var i=a8("img");av(a,ag,{width:a.offsetWidth,height:a.offsetHeight,html:a.innerHTML}),c&&(i.crossOrigin=c),i.src=g,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',br(a),bk(a,i)})}},resetPreview:function(){aS(this.previews,function(a){var b=ax(a,ag);aJ(a,{width:b.width,height:b.height}),a.innerHTML=b.html,aU(a,ag)})},preview:function(){var s=this,l=s.imageData,q=s.canvasData,j=s.cropBoxData,f=j.width,g=j.height,b=l.width,k=l.height,m=j.left-q.left-l.left,c=j.top-q.top-l.top;s.cropped&&!s.disabled&&(aJ(s.image2,aA({width:b,height:k},bh(aA({translateX:-m,translateY:-c},l)))),aS(s.previews,function(o){var e=ax(o,ag),n=e.width,r=e.height,h=n,d=r,p=1;f&&(p=n/f,d=g*p),g&&d>r&&(p=r/g,h=f*p,d=r),aJ(o,{width:h,height:d}),aJ(bw(o,"img")[0],aA({width:b*p,height:k*p},bh(aA({translateX:-m*p,translateY:-c*p},l))))}))}},aj="undefined"!=typeof window?window.PointerEvent:null,aC=aj?"pointerdown":"touchstart mousedown",bA=aj?"pointermove":"touchmove mousemove",by=aj?" pointerup pointercancel":"touchend touchcancel mouseup",bH="wheel mousewheel DOMMouseScroll",ak="dblclick",ad="resize",aT="cropstart",bM="cropmove",bE="cropend",bL="crop",aY="zoom",ap={bind:function(){var d=this,f=d.options,b=d.element,c=d.cropper;aH(f.cropstart)&&ar(b,aT,f.cropstart),aH(f.cropmove)&&ar(b,bM,f.cropmove),aH(f.cropend)&&ar(b,bE,f.cropend),aH(f.crop)&&ar(b,bL,f.crop),aH(f.zoom)&&ar(b,aY,f.zoom),ar(c,aC,d.onCropStart=aR(d.cropStart,d)),f.zoomable&&f.zoomOnWheel&&ar(c,bH,d.onWheel=aR(d.wheel,d)),f.toggleDragModeOnDblclick&&ar(c,ak,d.onDblclick=aR(d.dblclick,d)),ar(document,bA,d.onCropMove=aR(d.cropMove,d)),ar(document,by,d.onCropEnd=aR(d.cropEnd,d)),f.responsive&&ar(window,ad,d.onResize=aR(d.resize,d))},unbind:function(){var d=this,f=d.options,b=d.element,c=d.cropper;aH(f.cropstart)&&au(b,aT,f.cropstart),aH(f.cropmove)&&au(b,bM,f.cropmove),aH(f.cropend)&&au(b,bE,f.cropend),aH(f.crop)&&au(b,bL,f.crop),aH(f.zoom)&&au(b,aY,f.zoom),au(c,aC,d.onCropStart),f.zoomable&&f.zoomOnWheel&&au(c,bH,d.onWheel),f.toggleDragModeOnDblclick&&au(c,ak,d.onDblclick),au(document,bA,d.onCropMove),au(document,by,d.onCropEnd),f.responsive&&au(window,ad,d.onResize)}},bz=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,aa={resize:function(){var d=this,g=d.options,b=d.container,c=d.containerData,h=Number(g.minContainerWidth)||200,j=Number(g.minContainerHeight)||100;if(!d.disabled&&c.width!==h&&c.height!==j){var f=b.offsetWidth/c.width;1===f&&b.offsetHeight===c.height||!function(){var e=void 0,k=void 0;g.restore&&(e=d.getCanvasData(),k=d.getCropBoxData()),d.render(),g.restore&&(d.setCanvasData(aS(e,function(a,i){e[i]=a*f})),d.setCropBoxData(aS(k,function(a,i){k[i]=a*f})))}()}},dblclick:function(){var a=this;a.disabled||"none"===a.options.dragMode||a.setDragMode(aF(a.dragBox,"cropper-crop")?"move":"crop")},wheel:function(d){var f=this,b=bu(d),c=Number(f.options.wheelZoomRatio)||0.1,g=1;f.disabled||(b.preventDefault(),f.wheeling||(f.wheeling=!0,setTimeout(function(){f.wheeling=!1},50),b.deltaY?g=b.deltaY>0?1:-1:b.wheelDelta?g=-b.wheelDelta/120:b.detail&&(g=b.detail>0?1:-1),f.zoom(-g*c,b)))},cropStart:function(d){var f=this;if(!f.disabled){var b=f.options,c=f.pointers,g=bu(d),h=void 0;g.changedTouches?aS(g.changedTouches,function(a){c[a.identifier]=a7(a)}):c[g.pointerId||0]=a7(g),h=Object.keys(c).length>1&&b.zoomable&&b.zoomOnTouch?"zoom":ax(g.target,"action"),bz.test(h)&&bj(f.element,"cropstart",{originalEvent:g,action:h})!==!1&&(g.preventDefault(),f.action=h,f.cropping=!1,"crop"===h&&(f.cropping=!0,ay(f.dragBox,"cropper-modal")))}},cropMove:function(d){var f=this,b=f.action;if(!f.disabled&&b){var c=f.pointers,g=bu(d);g.preventDefault(),bj(f.element,"cropmove",{originalEvent:g,action:b})!==!1&&(g.changedTouches?aS(g.changedTouches,function(a){aA(c[a.identifier],a7(a,!0))}):aA(c[g.pointerId||0],a7(g,!0)),f.change(g))}},cropEnd:function(d){var f=this;if(!f.disabled){var b=f.action,c=f.pointers,g=bu(d);g.changedTouches?aS(g.changedTouches,function(a){delete c[a.identifier]}):delete c[g.pointerId||0],b&&(g.preventDefault(),Object.keys(c).length||(f.action=""),f.cropping&&(f.cropping=!1,aO(f.dragBox,"cropper-modal",f.cropped&&this.options.modal)),bj(f.element,"cropend",{originalEvent:g,action:b}))}}},bF="e",ac="w",am="s",ai="n",af="se",bO="sw",bB="ne",bD="nw",bb={change:function(A){var Q=this,T=Q.options,L=Q.containerData,I=Q.canvasData,J=Q.cropBoxData,F=T.aspectRatio,N=Q.action,D=J.width,R=J.height,K=J.left,H=J.top,z=K+D,O=H+R,P=0,q=0,m=L.width,S=L.height,k=!0,j=void 0;!F&&A.shiftKey&&(F=D&&R?D/R:1),Q.limited&&(P=J.minLeft,q=J.minTop,m=P+Math.min(L.width,I.width,I.left+I.width),S=q+Math.min(L.height,I.height,I.top+I.height));var c=Q.pointers,E=c[Object.keys(c)[0]],G={x:E.endX-E.startX,y:E.endY-E.startY};switch(F&&(G.X=G.y*F,G.Y=G.x/F),N){case"all":K+=G.x,H+=G.y;break;case bF:if(G.x>=0&&(z>=m||F&&(H<=q||O>=S))){k=!1;break}D+=G.x,F&&(R=D/F,H-=G.Y/2),D<0&&(N=ac,D=0);break;case ai:if(G.y<=0&&(H<=q||F&&(K<=P||z>=m))){k=!1;break}R-=G.y,H+=G.y,F&&(D=R*F,K+=G.X/2),R<0&&(N=am,R=0);break;case ac:if(G.x<=0&&(K<=P||F&&(H<=q||O>=S))){k=!1;break}D-=G.x,K+=G.x,F&&(R=D/F,H+=G.Y/2),D<0&&(N=bF,D=0);break;case am:if(G.y>=0&&(O>=S||F&&(K<=P||z>=m))){k=!1;break}R+=G.y,F&&(D=R*F,K-=G.X/2),R<0&&(N=ai,R=0);break;case bB:if(F){if(G.y<=0&&(H<=q||z>=m)){k=!1;break}R-=G.y,H+=G.y,D=R*F}else{G.x>=0?z<m?D+=G.x:G.y<=0&&H<=q&&(k=!1):D+=G.x,G.y<=0?H>q&&(R-=G.y,H+=G.y):(R-=G.y,H+=G.y)}D<0&&R<0?(N=bO,R=0,D=0):D<0?(N=bD,D=0):R<0&&(N=af,R=0);break;case bD:if(F){if(G.y<=0&&(H<=q||K<=P)){k=!1;break}R-=G.y,H+=G.y,D=R*F,K+=G.X}else{G.x<=0?K>P?(D-=G.x,K+=G.x):G.y<=0&&H<=q&&(k=!1):(D-=G.x,K+=G.x),G.y<=0?H>q&&(R-=G.y,H+=G.y):(R-=G.y,H+=G.y)}D<0&&R<0?(N=af,R=0,D=0):D<0?(N=bB,D=0):R<0&&(N=bO,R=0);break;case bO:if(F){if(G.x<=0&&(K<=P||O>=S)){k=!1;break}D-=G.x,K+=G.x,R=D/F}else{G.x<=0?K>P?(D-=G.x,K+=G.x):G.y>=0&&O>=S&&(k=!1):(D-=G.x,K+=G.x),G.y>=0?O<S&&(R+=G.y):R+=G.y}D<0&&R<0?(N=bB,R=0,D=0):D<0?(N=af,D=0):R<0&&(N=bD,R=0);break;case af:if(F){if(G.x>=0&&(z>=m||O>=S)){k=!1;break}D+=G.x,R=D/F}else{G.x>=0?z<m?D+=G.x:G.y>=0&&O>=S&&(k=!1):D+=G.x,G.y>=0?O<S&&(R+=G.y):R+=G.y}D<0&&R<0?(N=bD,R=0,D=0):D<0?(N=bO,D=0):R<0&&(N=bB,R=0);break;case"move":Q.move(G.x,G.y),k=!1;break;case"zoom":Q.zoom(aL(c),A),k=!1;break;case"crop":if(!G.x||!G.y){k=!1;break}j=bs(Q.cropper),K=E.startX-j.left,H=E.startY-j.top,D=J.minWidth,R=J.minHeight,G.x>0?N=G.y>0?af:bB:G.x<0&&(K-=D,N=G.y>0?bO:bD),G.y<0&&(H-=R),Q.cropped||(aI(Q.cropBox,"cropper-hidden"),Q.cropped=!0,Q.limited&&Q.limitCropBox(!0,!0))}k&&(J.width=D,J.height=R,J.left=K,J.top=H,Q.action=N,Q.renderCropBox()),aS(c,function(a){a.startX=a.endX,a.startY=a.endY})}},bN={crop:function(){var a=this;return a.ready&&!a.disabled&&(a.cropped||(a.cropped=!0,a.limitCropBox(!0,!0),a.options.modal&&ay(a.dragBox,"cropper-modal"),aI(a.cropBox,"cropper-hidden")),a.setCropBoxData(a.initialCropBoxData)),a},reset:function(){var a=this;return a.ready&&!a.disabled&&(a.imageData=aA({},a.initialImageData),a.canvasData=aA({},a.initialCanvasData),a.cropBoxData=aA({},a.initialCropBoxData),a.renderCanvas(),a.cropped&&a.renderCropBox()),a},clear:function(){var a=this;return a.cropped&&!a.disabled&&(aA(a.cropBoxData,{left:0,top:0,width:0,height:0}),a.cropped=!1,a.renderCropBox(),a.limitCanvas(),a.renderCanvas(),aI(a.dragBox,"cropper-modal"),ay(a.cropBox,"cropper-hidden")),a},replace:function(c,d){var b=this;return !b.disabled&&c&&(b.isImg&&(b.element.src=c),d?(b.url=c,b.image.src=c,b.ready&&(b.image2.src=c,aS(b.previews,function(a){bw(a,"img")[0].src=c}))):(b.isImg&&(b.replaced=!0),b.options.data=null,b.load(c))),b},enable:function(){var a=this;return a.ready&&(a.disabled=!1,aI(a.cropper,"cropper-disabled")),a},disable:function(){var a=this;return a.ready&&(a.disabled=!0,ay(a.cropper,"cropper-disabled")),a},destroy:function(){var c=this,d=c.element,b=c.image;return c.loaded?(c.isImg&&c.replaced&&(d.src=c.originalUrl),c.unbuild(),aI(d,"cropper-hidden")):c.isImg?au(d,"load",c.onStart):b&&a4(b),aU(d,"cropper"),c},move:function(b,c){var a=this,d=a.canvasData;return a.moveTo(aV(b)?b:d.left+Number(b),aV(c)?c:d.top+Number(c))},moveTo:function(b,a){var d=this,e=d.canvasData,c=!1;return aV(a)&&(a=b),b=Number(b),a=Number(a),d.ready&&!d.disabled&&d.options.movable&&(aQ(b)&&(e.left=b,c=!0),aQ(a)&&(e.top=a,c=!0),c&&d.renderCanvas(!0)),d},zoom:function(d,f){var b=this,c=b.canvasData;return d=Number(d),d=d<0?1/(1-d):1+d,b.zoomTo(c.width*d/c.naturalWidth,f)},zoomTo:function(A,v){var y=this,m=y.options,g=y.canvasData,j=g.width,b=g.height,q=g.naturalWidth,x=g.naturalHeight;if(A=Number(A),A>=0&&y.ready&&!y.disabled&&m.zoomable){var B=q*A,w=x*A;if(bj(y.element,"zoom",{originalEvent:v,oldRatio:j/q,ratio:B/q})===!1){return y}if(v){var k=y.pointers,f=bs(y.cropper),z=k&&Object.keys(k).length?be(k):{pageX:v.pageX,pageY:v.pageY};g.left-=(B-j)*((z.pageX-f.left-g.left)/j),g.top-=(w-b)*((z.pageY-f.top-g.top)/b)}else{g.left-=(B-j)/2,g.top-=(w-b)/2}g.width=B,g.height=w,y.renderCanvas(!0)}return y},rotate:function(a){var b=this;return b.rotateTo((b.imageData.rotate||0)+Number(a))},rotateTo:function(c){var b=this;return c=Number(c),aQ(c)&&b.ready&&!b.disabled&&b.options.rotatable&&(b.imageData.rotate=c%360,b.rotated=!0,b.renderCanvas(!0)),b},scale:function(b,a){var d=this,e=d.imageData,c=!1;return aV(a)&&(a=b),b=Number(b),a=Number(a),d.ready&&!d.disabled&&d.options.scalable&&(aQ(b)&&(e.scaleX=b,c=!0),aQ(a)&&(e.scaleY=a,c=!0),c&&d.renderImage(!0)),d},scaleX:function(d){var b=this,c=b.imageData.scaleY;return b.scale(d,aQ(c)?c:1)},scaleY:function(d){var b=this,c=b.imageData.scaleX;return b.scale(aQ(c)?c:1,d)},getData:function(d){var j=this,b=j.options,c=j.imageData,k=j.canvasData,l=j.cropBoxData,g=void 0,f=void 0;return j.ready&&j.cropped?(f={x:l.left-k.left,y:l.top-k.top,width:l.width,height:l.height},g=c.width/c.naturalWidth,aS(f,function(i,h){i/=g,f[h]=d?Math.round(i):i})):f={x:0,y:0,width:0,height:0},b.rotatable&&(f.rotate=c.rotate||0),b.scalable&&(f.scaleX=c.scaleX||1,f.scaleY=c.scaleY||1),f},setData:function(n){var m=this,f=m.options,b=m.imageData,g=m.canvasData,k={},o=void 0,j=void 0,e=void 0;return aH(n)&&(n=n.call(m.element)),m.ready&&!m.disabled&&aG(n)&&(f.rotatable&&aQ(n.rotate)&&n.rotate!==b.rotate&&(b.rotate=n.rotate,m.rotated=o=!0),f.scalable&&(aQ(n.scaleX)&&n.scaleX!==b.scaleX&&(b.scaleX=n.scaleX,j=!0),aQ(n.scaleY)&&n.scaleY!==b.scaleY&&(b.scaleY=n.scaleY,j=!0)),o?m.renderCanvas():j&&m.renderImage(),e=b.width/b.naturalWidth,aQ(n.x)&&(k.left=n.x*e+g.left),aQ(n.y)&&(k.top=n.y*e+g.top),aQ(n.width)&&(k.width=n.width*e),aQ(n.height)&&(k.height=n.height*e),m.setCropBoxData(k)),m},getContainerData:function(){var a=this;return a.ready?a.containerData:{}},getImageData:function(){var a=this;return a.loaded?a.imageData:{}},getCanvasData:function(){var c=this,d=c.canvasData,b={};return c.ready&&aS(["left","top","width","height","naturalWidth","naturalHeight"],function(a){b[a]=d[a]}),b},setCanvasData:function(d){var b=this,c=b.canvasData,e=c.aspectRatio;return aH(d)&&(d=d.call(b.element)),b.ready&&!b.disabled&&aG(d)&&(aQ(d.left)&&(c.left=d.left),aQ(d.top)&&(c.top=d.top),aQ(d.width)?(c.width=d.width,c.height=d.width/e):aQ(d.height)&&(c.height=d.height,c.width=d.height*e),b.renderCanvas(!0)),b},getCropBoxData:function(){var c=this,d=c.cropBoxData,b=void 0;return c.ready&&c.cropped&&(b={left:d.left,top:d.top,width:d.width,height:d.height}),b||{}},setCropBoxData:function(e){var b=this,d=b.cropBoxData,g=b.options.aspectRatio,f=void 0,j=void 0;return aH(e)&&(e=e.call(b.element)),b.ready&&b.cropped&&!b.disabled&&aG(e)&&(aQ(e.left)&&(d.left=e.left),aQ(e.top)&&(d.top=e.top),aQ(e.width)&&e.width!==d.width&&(f=!0,d.width=e.width),aQ(e.height)&&e.height!==d.height&&(j=!0,d.height=e.height),g&&(f?d.height=d.width/g:j&&(d.width=d.height*g)),b.renderCropBox()),b},getCroppedCanvas:function(A){var v=this;if(!v.ready||!window.HTMLCanvasElement){return null}if(aG(A)||(A={}),!v.cropped){return ba(v.image,v.imageData,A)}var y=v.getData(),o=y.width,g=y.height,b=o/g,q=void 0,x=void 0,B=void 0;aG(A)&&(q=A.width,x=A.height,q?(x=q/b,B=q/o):x&&(q=x*b,B=x/g));var w=Math.floor(q||o),k=Math.floor(x||g),f=a8("canvas"),z=f.getContext("2d");f.width=w,f.height=k,A.fillColor&&(z.fillStyle=A.fillColor,z.fillRect(0,0,w,k));var j=function(){var i=ba(v.image,v.imageData,A),a=i.width,t=i.height,F=v.canvasData,E=[i],s=y.x+F.naturalWidth*(Math.abs(y.scaleX||1)-1)/2,e=y.y+F.naturalHeight*(Math.abs(y.scaleY||1)-1)/2,I=void 0,n=void 0,C=void 0,D=void 0,H=void 0,G=void 0;return s<=-o||s>a?s=I=C=H=0:s<=0?(C=-s,s=0,I=H=Math.min(a,o+s)):s<=a&&(C=0,I=H=Math.min(o,a-s)),I<=0||e<=-g||e>t?e=n=D=G=0:e<=0?(D=-e,e=0,n=G=Math.min(t,g+e)):e<=t&&(D=0,n=G=Math.min(g,t-e)),E.push(Math.floor(s),Math.floor(e),Math.floor(I),Math.floor(n)),B&&(C*=B,D*=B,H*=B,G*=B),H>0&&G>0&&E.push(Math.floor(C),Math.floor(D),Math.floor(H),Math.floor(G)),E}();return z.imageSmoothingEnabled=!!A.imageSmoothingEnabled,A.imageSmoothingQuality&&(z.imageSmoothingQuality=A.imageSmoothingQuality),z.drawImage.apply(z,a6(j)),f},setAspectRatio:function(b){var c=this,a=c.options;return c.disabled||aV(b)||(a.aspectRatio=Math.max(0,b)||NaN,c.ready&&(c.initCropBox(),c.cropped&&c.renderCropBox())),c},setDragMode:function(d){var g=this,b=g.options,c=g.dragBox,h=g.face,j=void 0,f=void 0;return g.loaded&&!g.disabled&&(j="crop"===d,f=b.movable&&"move"===d,d=j||f?d:"none",av(c,"action",d),aO(c,"cropper-crop",j),aO(c,"cropper-move",f),b.cropBoxMovable||(av(h,"action",d),aO(h,"cropper-crop",j),aO(h,"cropper-move",f))),g}},bg="cropper",ae=bg+"-hidden",bI="error",a3="load",bi="ready",ah="crop",aD=/^data:/,ab=/^data:image\/jpeg;base64,/,al=void 0,a5=function(){function a(d,b){aZ(this,a);var c=this;c.element=d,c.options=aA({},aE,aG(b)&&b),c.loaded=!1,c.ready=!1,c.complete=!1,c.rotated=!1,c.cropped=!1,c.disabled=!1,c.replaced=!1,c.limited=!1,c.wheeling=!1,c.isImg=!1,c.originalUrl="",c.canvasData=null,c.cropBoxData=null,c.previews=null,c.pointers={},c.init()}return bl(a,[{key:"init",value:function(){var d=this,f=d.element,b=f.tagName.toLowerCase(),c=void 0;if(!ax(f,bg)){if(av(f,bg,d),"img"===b){if(d.isImg=!0,d.originalUrl=c=f.getAttribute("src"),!c){return}c=f.src}else{"canvas"===b&&window.HTMLCanvasElement&&(c=f.toDataURL())}d.load(c)}}},{key:"load",value:function(d){var f=this,b=f.options,c=f.element;if(d){if(f.url=d,f.imageData={},!b.checkOrientation||!window.ArrayBuffer){return void f.clone()}if(aD.test(d)){return void (ab.test(d)?f.read(bx(d)):f.clone())}var g=new XMLHttpRequest;g.onerror=g.onabort=function(){f.clone()},g.onload=function(){f.read(g.response)},b.checkCrossOrigin&&a2(d)&&c.crossOrigin&&(d=a0(d)),g.open("get",d),g.responseType="arraybuffer",g.withCredentials="use-credentials"===c.crossOrigin,g.send()}}},{key:"read",value:function(d){var j=this,b=j.options,c=bc(d),k=j.imageData,l=0,g=1,f=1;if(c>1){switch(j.url=bn(d),c){case 2:g=-1;break;case 3:l=-180;break;case 4:f=-1;break;case 5:l=90,f=-1;break;case 6:l=90;break;case 7:l=90,g=-1;break;case 8:l=-90}}b.rotatable&&(k.rotate=l),b.scalable&&(k.scaleX=g,k.scaleY=f),j.clone()}},{key:"clone",value:function(){var d=this,j=d.element,b=d.url,c=void 0,k=void 0,l=void 0,g=void 0;d.options.checkCrossOrigin&&a2(b)&&(c=j.crossOrigin,c?k=b:(c="anonymous",k=a0(b))),d.crossOrigin=c,d.crossOriginUrl=k;var f=a8("img");c&&(f.crossOrigin=c),f.src=k||b,d.image=f,d.onStart=l=aR(d.start,d),d.onStop=g=aR(d.stop,d),d.isImg?j.complete?d.start():ar(j,a3,l):(ar(f,a3,l),ar(f,bI,g),ay(f,"cropper-hide"),j.parentNode.insertBefore(f,j.nextSibling))}},{key:"start",value:function(c){var d=this,b=d.isImg?d.element:d.image;c&&(au(b,a3,d.onStart),au(b,bI,d.onStop)),bo(b,function(f,e){aA(d.imageData,{naturalWidth:f,naturalHeight:e,aspectRatio:f/e}),d.loaded=!0,d.build()})}},{key:"stop",value:function(){var b=this,c=b.image;au(c,a3,b.onStart),au(c,bI,b.onStop),a4(c),b.image=null}},{key:"build",value:function(){var u=this,m=u.options,q=u.element,j=u.image,f=void 0,b=void 0,k=void 0,p=void 0,v=void 0,n=void 0;if(u.loaded){u.ready&&u.unbuild();var g=a8("div");g.innerHTML=bd,u.container=f=q.parentNode,u.cropper=b=aK(g,"cropper-container")[0],u.canvas=k=aK(b,"cropper-canvas")[0],u.dragBox=p=aK(b,"cropper-drag-box")[0],u.cropBox=v=aK(b,"cropper-crop-box")[0],u.viewBox=aK(b,"cropper-view-box")[0],u.face=n=aK(v,"cropper-face")[0],bk(k,j),ay(q,ae),f.insertBefore(b,q.nextSibling),u.isImg||aI(j,"cropper-hide"),u.initPreview(),u.bind(),m.aspectRatio=Math.max(0,m.aspectRatio)||NaN,m.viewMode=Math.max(0,Math.min(3,Math.round(m.viewMode)))||0,u.cropped=m.autoCrop,m.autoCrop?m.modal&&ay(p,"cropper-modal"):ay(v,ae),m.guides||ay(aK(v,"cropper-dashed"),ae),m.center||ay(aK(v,"cropper-center"),ae),m.background&&ay(b,"cropper-bg"),m.highlight||ay(n,"cropper-invisible"),m.cropBoxMovable&&(ay(n,"cropper-move"),av(n,"action","all")),m.cropBoxResizable||(ay(aK(v,"cropper-line"),ae),ay(aK(v,"cropper-point"),ae)),u.setDragMode(m.dragMode),u.render(),u.ready=!0,u.setData(m.data),u.completing=setTimeout(function(){aH(m.ready)&&ar(q,bi,m.ready,!0),bj(q,bi),bj(q,ah,u.getData()),u.complete=!0},0)}}},{key:"unbuild",value:function(){var b=this;b.ready&&(b.complete||clearTimeout(b.completing),b.ready=!1,b.complete=!1,b.initialImageData=null,b.initialCanvasData=null,b.initialCropBoxData=null,b.containerData=null,b.canvasData=null,b.cropBoxData=null,b.unbind(),b.resetPreview(),b.previews=null,b.viewBox=null,b.cropBox=null,b.dragBox=null,b.canvas=null,b.container=null,a4(b.cropper),b.cropper=null)}}],[{key:"noConflict",value:function(){return window.Cropper=al,a}},{key:"setDefaults",value:function(b){aA(aE,aG(b)&&b)}}]),a}();return aA(a5.prototype,bC),aA(a5.prototype,bJ),aA(a5.prototype,ap),aA(a5.prototype,aa),aA(a5.prototype,bb),aA(a5.prototype,bN),"undefined"!=typeof window&&(al=window.Cropper,window.Cropper=a5),a5});
